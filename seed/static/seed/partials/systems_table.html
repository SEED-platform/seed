<div class="system-table-container">
    <div class="system-type">{$ system_key $} Systems</div>
    <table class="table table-striped table_highlight_first system-table"
        style="border-bottom: 1px solid #dddddd">
        <thead>
            <tr>
                <th style="width:90px;"></th>
                <th ng-repeat="header in fields">{$ header $}</th>
            </tr>
        </thead>
        <tbody>
            <tr ng-repeat-start="system in systems[system_key]">
                <td>
                    <div ng-if="system.services.length">
                        <button type="button" class="accordion-button" data-toggle="collapse"
                            data-target="#collapse-{$ system.id $}" ng-click="collapse(system.id)">
                            Services <i class="fa-solid fa-chevron-right accordion-indicator-default-closed"></i>
                        </button>
                    </div>
                </td>
                <td ng-repeat="attribute in fields">{$ system[attribute.toLowerCase()] $}</td>
            </tr>
            <tr id="collapse-{$ system.id $}" class="collapse" ng-repeat-end="system in systems[system_key]">
                <td></td>
                <td colspan="{$ fields.length $}">
                    <div ui-grid="gridOptionsBySystemId[system.id]"></div>
                </td>
            </tr>
        </tbody>
    </table>
</div>