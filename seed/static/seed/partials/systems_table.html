<div class="system-table-container">
    <div class="system-type">{$ system_key $} Systems</div>
    <table class="table table-striped table_highlight_first system-table"
        style="border-bottom: 1px solid #dddddd; border-collapse: collapse;">
        <thead>
            <tr>
                <th style="width:90px;"></th>
                <th ng-repeat="header in headers">{$ header $}</th>
                <th style="width: 110px;">Actions</th>
            </tr>
        </thead>
        <tbody>
            <tr ng-repeat-start="system in systems[system_key]" style="border-bottom: 1px solid gray">
                <td>
                    <div ng-if="system.services.length">
                        <button type="button" class="accordion-button" data-toggle="collapse"
                            data-target="#collapse-services-{$ system.id $}" ng-click="collapse(system.id)">
                            Services <i class="fa-solid fa-chevron-right accordion-indicator-default-closed"></i>
                        </button>
                    </div>
                </td>
                <td ng-repeat="field in fields">{$ system[field] $}</td>
                <td>
                    <div ng-if="menu.user.organization.user_role !== 'viewer'">
                        <button class="btn btn-default btn-rowform" ng-click="edit_system(system.id)" translate>edit</button>
                        <button class="btn btn-danger btn-rowform" ng-click="remove_system(system.id)">X</button>
                    </div>
                </td>
            </tr>
            <tr id="collapse-services-{$ system.id $}" class="collapse services-table" ng-repeat-end="system in systems[system_key]">
                <td></td>
                <td colspan="{$ fields.length + 1 $}" style="padding: 0">
                    <div 
                        ng-include="::urls.static_url + 'seed/partials/services_table.html'"
                    ></div>
                </td>
            </tr>
        </tbody>
    </table>
</div>