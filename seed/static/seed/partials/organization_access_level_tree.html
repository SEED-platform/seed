<div class="page_header_container">
    <div class="page_header">
        <div class="left page_action_container">
            <a ui-sref="organizations" class="page_action"><i class="fa fa-chevron-left"></i> {$:: 'Organizations' | translate $}</a>
        </div>
        <div class="page_title">
            <h1>{$:: org.name $}</h1>
        </div>
        <div class="right page_action_container"></div>
    </div>
</div>
<div class="section_nav_container">
    <div class="section_nav" ng-include="::urls.static_url + 'seed/partials/accounts_nav.html'"></div>
</div>
<div class="section">
    <div class="section_header_container">
        <div class="section_header has_no_padding fixed_height_short">
            <div class="section_action_container left">
                <h2><i class="fa fa-sitemap"></i> {$:: 'Access Level Tree' | translate $}</h2>
            </div>
        </div>
    </div>
    <div class="section_content_container">
        <div class="section_content with_padding">
            <div class="pad-top-10">
                <button type="button" class="btn btn-primary" ng-show="auth.requires_owner" ng-click="open_add_level_modal()">
                    {$:: 'Edit/Add Access Levels' | translate $}
                </button>

                <button type="button" class="btn btn-primary" ng-show="auth.requires_owner" ng-click="open_add_level_instance_modal()">
                    {$:: 'Add Access Level Instance' | translate $}
                </button>
                <button type="button" class="btn btn-primary" ng-show="auth.requires_owner" ng-click="open_upload_al_instances_modal()">
                    {$:: 'Upload Access Level Instances' | translate $}
                </button>
                <div class="access-tree">
                    <uib-accordion ng-if="access_level_tree[0]">
                        <div uib-accordion-group is-open=" al-{$ access_level_tree[0].id $}.open">
                            <uib-accordion-heading>
                                <b>{$ access_level_tree[0].data.name $}</b>
                                <i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': al-{$ access_level_tree[0].id $}.open, 'glyphicon-chevron-right': !al-{$ access_level_tree[0].id $}.open}"></i>
                            </uib-accordion-heading>
                            <div
                                ng-include="::urls.static_url + 'seed/partials/access_level_tree_section.html'"
                                ng-init="children = access_level_tree[0].children; access_level_names = access_level_names; current_level = current_level">
                            </div>
                        </div>
                    </uib-accordion>
                        <!-- <div class="accordion-header" style="margin: 2px 0">
                            <button
                                class="accordion-button al-tree"
                                type="button"
                                data-toggle="collapse"
                                data-target="#root"
                            >
                                <i class="fa fa-chevron-down accordion-indicator-default-open" id="indicator-root"></i>
                                <span class="event-detail">{$ access_level_tree[0].data.name $}</span>
                                     <span>
                                    <button class="btn btn-default btn-xs" type="button" ng-click="open_edit_al_instance_modal(child.id, child.data.name)" tooltip-placement="bottom" uib-tooltip="Edit {$ child.data.name $}">
                                      <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
                                    </button>
                                    </span>
                            </button>
                        </div>

                        <div id="root" class="accordion-body event-collapse collapse in">

                            <div
                                ng-include="::urls.static_url + 'seed/partials/access_level_tree_section.html'"
                                ng-init="children = access_level_tree[0].children; access_level_names = access_level_names; current_level = 1">
                            </div>

                        </div> -->


                </div>


                <div class="access-tree">
                    <script type="text/ng-template" id="a">
                        {$:: ali.data.name $}
                        <button class="btn btn-default btn-xs" type="button" ng-click="open_edit_al_instance_modal(ali.id, ali.data.name)" tooltip-placement="bottom" uib-tooltip="Edit {$ ali.data.name $}">
                            <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
                        </button>

                        <ul ng-if="ali.children">
                            <li ng-repeat="ali in ali.children" ng-include="'a'">
                            </li>
                        </ul>
                    </script>
                    <ul ng-repeat="ali in access_level_tree" ng-include="'a'"></ul>
                </div>
            </div>
        </div>
    </div>
</div>
